---
title: Introducing Liquid Templates
instalment: 179
miniseries: GitHub Pages
creators: [bart, allison]
date: 2025-05-10
---
TO DO

## Matching Podcast Episode

TO DO

## Instalment Resources

- The instalment ZIP file — [pbs179.zip](./assets/pbs179.zip) — TO UPDATE

## What's the Problem to be Solved?

When building sites with a static site generator like Jekyll you need a mechanism for injecting information into the otherwise static source files using some kind of place-holders. That could be site-wide information like a list of all pages that exist, page-specific information like the date it was published, theme-specific information, or some other form of data being added to the site. In short, static site generators need some kind of templating engine, and rather than inventing their own, the Jekyll developers chose to use an existing open source templating engine, [Liquid](https://shopify.github.io/liquid/).

## Some Background on Liquid

Liquid was developed as part of the very first release of the [Shopify](https://www.shopify.com/) e-commerce platform, and was released as open source immediately. It remains in use today as the templating engine used to customise customer stores on the Shopify platform.

There are in effect three variants of Liquid —
there is the open source core which the other variants build on, and which anyone can use in any generic context. And then there are dedicated variants for Liquid's two mistnprominent usages — a variant for Shopify, and another for Jekyll. These both extend the core by adding additional application-specific features.

I mention this detail because it can be really helpful when interpreting search results!

There are the official documentation links for the two flavours that are relevant for our use:

* **The Core Liquid Docs:** [shopify.github.io/…](https://shopify.github.io/liquid/) (we can use all the features described here for the specific version of Liquid included in our specific install of Jekyll)
* **The Jekyll Extensions to Liquid:** [jekyllrb.com/…](https://jekyllrb.com/docs/liquid/)

Finally, when you use Jekyll with GitHub Pages (like we are), there is one final source of extended liquid functionality to be aware of — the `github-metadata` Jekyll plugin included automatically as a dependency of the `github-pages` gem. The official (very limited) [documentation is available here](https://jekyll.github.io/github-metadata/).

## Liquid's Architecture

If you zoom out to the conceptual level, Liquid really is just an alternative to other templating engines like Mustach which we used while building client-side Javascript web apps. 

Liquid takes as input template strings which contain placeholders, and a collection of data, and produces output strings the appropriate data substituted for the placeholders. 

Where things differ is in the proverbial *plumbing*. We invoked Mistach by calling a two-argument function that returned the output strings — we passed that function a template string with placeholders, and a data structure, and it returned a string.

With Jekyll it's our source files that act as the template strings, and Jekyll provides the data as part of the site rendering process. The results of the substitutions appear in the files that make up the generated site.

So: `input files with Liquid tags + Jekyll variables → output files`

There are of some subtleties, but the big-picture rule is that HTML and Markdown files in the input folder always get processed with Liquid, and so do other text-based files in the input folder with front matter, but there are exceptions and you can add explicit exclusions too.

## Jekyll's Liquid Variables

Under the hood the data Jekyll presents to Liquid is actually stored in Ruby variables, but it's presented to the world as generic data compatible with both JSON and YAML. In other words, the data available for use in Liquid templates consists of arbitrarily nested combinations of simple values, lists, and dictionaries.

The core version of Liquid provides no built-in data structures, and the Shopify and Jekyll variants provide completely different sets of data.

All the data Jekyll makes available within Liquid templates is organised into a well named and well documented collection of dictionaries. The documentation refers to these dictionaries are *variables*. Some of these variables are available everywhere Jekyll processes Liquid tags, but some are only available in specific contexts. They are all so sensibly named that you're unlikely to try use the wrong variable in the wrong context.

You'll find a [full list of the variables in the Jekyll documentation](https://jekyllrb.com/docs/variables/), but some of the most important ones are:

* `site` for information related to the site as a whole.
  * When using Jekyll with GitHub Pages there is also `site.github` with additional GitHub-specific site-wide data related to the repository hosting the site.
* `page` for information related to the current page.
* `layout` for the information related to the theme layout(s) in use for building the current page.

We'll learn more about these variables later in the series as we start to use them.

## Basic Liquid Syntax — Objects, Tags & Filters

Before we dive in, just a reminder that in this series, we always use the technically correct jargon as used in the relevant official documentation, even when it is, perhaps, not the most elegant of terminology. While it can be a little irritating, not doing so would be disempowering, because it would be so much harder to independently give deeper into the docs or interpret search results.

With that said, let's look at the three main components of the Liquid syntax — *objects*, *tags*, and *filters*.

### Liquid Objects

Were the Shopify developers to have asked for my opinion I would definitely not have advised they name their data place-holders *objects*, but, alas, they didn't care about the opinions of a neophyte sysadmin when they made that choice way back in 2006 😉

Anyway, the Liquid documentation does refer to data placeholders as *liquid objects*, and the syntax is very straightforward — simply surround the reference to some data with doubled curly braces (yes, just like Mustach)!

Liquid also uses the same basic Javascript-like syntax for referencing nested variables — periods (`.`) to descend into dictionaries, and square beaches (`[]`) to access list elements via their zero-based indexes. So, to insert the site description from the Jekyll `site` variable you would use {% raw %}`{{ site.description }}`{% endraw %}, and to get the title of the site's first page you would use {% raw %}`{{ site.pages[0].title }}`{% endraw %}.

### Liquid Tags

If you want to use liquid for anything other than simply inserting some data, you need to use a *liquid tag*. The syntax for these is also very simple — wrap the tag name and it's optional arguments with {% raw %}`{%`{% undraw %} and {% raw %}`%}`{% endraw %}.

Each tag has its own syntax, but to give you a flavour, you can implement conditions like so:

```markdown
{% raw %}This site {% if site.title %}is titled '{{ site.title }}'{% else %}has no title 🙁{% endif %}{% endraw %}
```

And basic iteration like so:

```markdown
{% raw %}# Site Pages:
{% for page in site.page %}
- [{{ page.title }}]({{ page.url }})
{% else %}
*This site has no pages 🙁*
{% endfor %}{% endraw %}
```

When using Jekyll the tags avaiable to us are a superset of those provided by the core liquid library, and those provided by Jekyll.

* The core liquid tags are broken into four categories in the official documentation:
  * Control Flow (conditionals) — [shopify.github.io/…](https://shopify.github.io/liquid/tags/control-flow/)
  * Iteration (loops) — [shopify.github.io/…](https://shopify.github.io/liquid/tags/iteration/)
  * Template (comments, disabling rendering, and nesting templates) — [shopify.github.io/…](https://shopify.github.io/liquid/tags/template/)
  * Variables — [shopify.github.io/…](https://shopify.github.io/liquid/tags/variable/)
* The tags provided by Jekyll are listed in the Jekyll docs — [jekyllrb.com/…](https://jekyllrb.com/docs/liquid/tags/)

### Liquid Filters

*Liquid filters* are used to transform data when it's being rendered using liquid objects (curly braces). Filters take values as inputs and produce new values as outputs. You direct values into filters using the pipe symbol (`|`), and you can chain multiple filters together by using multiple pipes.

Simple filters don't require arguments, so you invoke them by just placing their name after the pipe, e.g. `{% raw %}{{ site.pages | size }}{% endraw %}` will output the number of pages in the site (`pages` is a list).

More complex filters expect one or more arguments, and those have to have a `:` placed after their name. A very useful example of a filter that takes an argument is `default:`. You use this filter to provide a default value for a variable that could be undefined, for example::

```markdown
{% raw %}**Page ID:** {{ page.id | default: "this page has no ID" }}{% endraw %}
```
Note that with a few exeptions, filters can't be used inside tags. The one exception is the `assign` tag which is used to assign a value to a variable (more on that in a future instalment). Some filters can also be invoked using the dot notation, most notably the `size` filter can be used on arrays (lists) like so:

```markdown
{% raw -%}
{% if site.pages.size > 10 %}
This is a big site!
{% else %}
This is a small site.
{% endif %}
{%- endraw %}
```

The filters availible to us when working within Jekyll are a superset of those provided by the core Liquid library, and those provided by Jekyll.

* Descriptions of each of the core filters are available via the sidebar of the officaol docs — [shopify.github.io/…](https://shopify.github.io/liquid/basics/introduction/)
* Descriptions of the filters provided by Jekyll can be found in the Jekyll docs — [jekyllrb.com/…](https://jekyllrb.com/docs/liquid/filters/)

## Liquid Data Types

As mentioned previously, Liquid variables only support the data types supported by JSON and YAML, so it really is just the basics:

| Type | Description |
| :---: | :--- |
| Booleans | The two Boolean literals are simply `true` & `false` |
| Numbers | Numbers are simply entered as regular numbers without any kind of quotations, e.g. `42` & `3.1417` |
| Strings | Strings can be quoted with single or double quotes, e.g. `'A string'` & `"Another String"` |
| Null Values | The absensce of a value is represnted with the literal `nil` (not the mor usual `null`!) |
| Lists (*Arrays*) | The Docs referer to lists as *arrays*. Indexes are zero-based and specified inside quare braces. Negative indexes are supported, with `-1` being the index of the last element in an array. E.g. `myArray[0]`, `myArray[42]` & `myArray[-1]` |
| Dictionaries | Not listed as a separate data type in the docs, appear to be considered simply nested variable names, with each level separated with a period symbol (`.`), e.g. `myDictionary.someKey` |

Liquid also supports some **speical literals**, specifically `nil` to represent the absence of any value at all (what Javascript represents with `null`), and `empty` to represent a list or string which is defined, but has no content.

### A Note on Truthiness

In Liquid, just about everything evaluates to `true` when coerced to a boolean — **the only things that coerce to `false` are `false` itself and `nil`**, everything else, including the number zero, empty strings, empty arrays, and empty dictionaries all coerce to `true`. This can really catch developers used to more traditional languages like Javascript by surprise!

## Operators in Liquid (For Comparisons Only!)

This might come as a surprise, but Liquid does not support any arithmetic operators! The only operators it supports are comparison operators. Arithmetic and string manipulations are performed using filters rather than operators. These are the operators you can use when making comparisons: 

| Operator | Description |
| :---: | :--- |
| `==` | Is equal to, e.g. `myString == "some string"` or `myNumber == 42` |
| `!=` | Is not equal to, e.g. `myString != "some string"` or `myNumber != 42` |
| `<` | Is less than, e.g. `myNumber < 42` |
| `>` | Is greater than, e.g. `myNumber > 42` |
| `<=` | Is less than or equal to, e.g. `myNumber <= 42` |
| `>=` | IS greater than or equal to, e.g. `myNumber >= 42` |
| `and` | Local and, e.g. `myNumber > 0 and myNumber <= 12` |
| `or` | Logical or, e.g. `myString == "ok" or myString == "yes"` |
| `contains` | Substring containment check, e.g. `myString contains "something"`. Only works on strings and arrays (lists) of strings. |

For complex comparisons, brachets (`()`) can be used to group sub-expressions.

## How Liquid Handles White Space

To stop Liquid objects and tags affecting the layout of the rendered text in unwanted ways, you can specify that all white space should be stripped before or after any object or tag by adding a minus symbol (`-`) directly inside any opening or closing delimiter.

If we assume the value of the variable `desert` is `WAFFLES`, then the following input text:

```text
I like {{ desert }} very much 🙂
I like {{- desert }} very much 🙂
I like {{ desert -}} very much 🙂
I like {{- desert -}} very much 🙂
```
Is rendered as:

```text
I like WAFFLES very much 🙂
I likeWAFFLES very much 🙂
I like WAFFLESvery much 🙂
I likeWAFFLESvery much 🙂
```

## A Very Basic Example

TO DO — Add list of pages sorted alphabetically to the home page.

## Final Thoughts

TO DO
