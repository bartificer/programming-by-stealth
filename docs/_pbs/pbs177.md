---
title: Publishing A Basic Jekyll Site
instalment: 177
miniseries: GitHub Pages
creators: [bart, allison]
date: 2025-02-05
---
Having learned how to create our own GitHub Actions workflow to publish a website using a custom build system, Webpack in our case, we're not moving on other use GitHub's default workflow to publish a site with the Jekyll Static Site Generator.

We're going to do it in such a way that we can test our site locally before sending it to GitHub, and, so we are bundling Bootstrap in a customisable way.

## Matching Podcast Episode

TO DO

## Instalment Resources

- The instalment ZIP file â€” [pbs177.zip](./assets/pbs177.zip) TO UPDATE

## Some Important Context

It's important to note that that if we you don't want the ability to test your GutHub Pages site locally you can skip most of this instalment and simply enable GitHub Pages to start serving your `docs` folder just like we did in the first of the two worked examples in [the previous instalment](./pbs176). At that point you can create a standard Jekyll directory structure and start building your site.

However, there's a very good reason not to take that easy route if you plan to use Jekyll as a full content management system â€” if you do your only means other than testing your site will be to actually publish it on the internet, and you'll need to do a full commit to `main` for each change you want to test. This is inordinately tedious for debugging work!

The extra work described in this instalment results in a Jekyll site that is **both** compatible with GitHub Pages, and, with a local install of Jekyll.

I mentioned in the introductory instalment that GitHub Pages uses a customised version of Jekyll, and that's a vitally important point to understand. Because if its various customisations, you don't install Jekyll directly in your `docs` folder, instead you install a `github-pages` package which lists many dependencies, including the specific version of Jekyll currently supported by GitHub Pages. This is always a somewhat older Jekyll version. As of February 2025 the main Jekyll project is at version `4.3`, but GitHub Pages is using Jekyll version `3.10` .

**This lagging version number is important to keep in mind when reading the [Jekyll documentation](https://jekyllrb.com/docs/)**. Newer features will be annotated with the Jekyll version in which they were first added, some newer features are not available when using Jekyll on GitHub Pages.

## Preparing to Run Jekyll Locally

To test a Jekyll site locally you need to install Jekyll on your computer. Jekyll is written in [Ruby](https://www.ruby-lang.org/), so the first thing you'll need to do is install [Ruby 3](https://www.ruby-lang.org/en/downloads/).

Macs ship with Ruby version 2 installed, but it's easy to upgrade to Ruby 3 using [Homebrew](https://brew.sh). 

To stop random things breaking on your Mac it's important not to replace the built-in Ruby,  but to augment it with our desired newer version and a tool for flipping your terminal between versions as needed. We'll be following [Jekyll's advice](https://jekyllrb.com/docs/installation/macos/) and using `chruby` as our Ruby version manager.

If you don't already have it installed, start by installing Homebrew using [the instructions on their home page](https://brew.sh).

With Homebrew installed we can now install the universal Ruby version installer and the Chruby version switcher with the command:

```sh
brew install chruby ruby-install
```

Next, install the latest version of Ruby that is supported by Jekyll (listed on the Jekyll advice page linked above). As of February 2025 the command to run is:

```sh
ruby-install ruby 3.3.5
```

This will trigger a Unix/Linux style install from source code, so you'll see lots of output scrolling by, and it'll take some time.

When Ruby finishes installing, the next step is to configure Chruby with the following commands:

```sh
echo "source $(brew --prefix)/opt/chruby/share/chruby/chruby.sh" >> ~/.zshrc
echo "source $(brew --prefix)/opt/chruby/share/chruby/auto.sh" >> ~/.zshrc
echo "chruby ruby-3.3.5" >> ~/.zshrc # run 'chruby' to see actual version
```

> These instructions assume a modern version of macOS using Zsh, if you're still using Bash edit the commands to append to `~/.bash_profile` instead of `~/.zshrc`!
>
> {: .notice}

With all that done, close and re-open your Terminal to pick up the new Ruby configuration. Verify your are using Ruby 3 now with the command:

```sh
ruby --version
```

To easily install Jekyll and its dependencies we need to install the optional Ruby package manager [Bundler](https://bundler.io), we can do that with the command:

```sh
gem install bundler
```

Now that we have bundler installed we have everything we need to start running Jekyll locally.

## Worked Example â€” A Basic Jekyll Site with Customisable Bootstrap

We're now ready to build our first site, and we're going to do it in such a way that we can test it locally.

### Step 1 â€” Create a New Repository on GitHub

Log in to GitHub and create a new repository. Be sure to choose the following settings:

1. Select **public** from the visibility radio group (GitHub Pages can be used on private repositories, but not for free).
2. Not needed, but I strongly recommend ticking the box to Initialise the repo with a README file so you have a place to add instructions to yourself related to the site. This will also initialise the repository, making it easier to start using.
3. Choose **Ruby** in the **Add .gitignore** dropdown.

### Step 2 â€” Clone Your Repo & Configure GitHub Pages Locally

Clone your newly created repo and open a command prompt in that folder.

Because Jekyll is a Ruby app, we are going to manage it using Ruby's equivalent of an NPM configuration file, a file named `Gemfile`. This file will specify the specific versions we need for each Ruby package that needs to be installed. Note that Ruby refers to packages as *gems*, some fun wordplay given the language's name ðŸ™‚

Start by creating a `docs` folder, then change into it with the command:

```sh
mkdir docs; cd docs
```

Rather than managing our Gemfile directly, we're going to let the Bundler do that for us by using the `bundle` command.

Before we can start adding the gems we need we need to initialise a blank Gemfile with the command:

```sh
bundle init
```

You'll see that running this command in the `docs` folder created the file `docs/Gemfile`.

Older versions of Ruby contained the package `webrick` as a standard package, but Ruby 3 doesn't, so to avoid errors, let's first add it to our Gemfile with the command: 

```sh
bundle add webrick
```

This command both adds the gem to our Gemfile, and, if needed, installs it on our system.

Next, we want to add the GitHub Pages gem. This will install the needed version of Jekyll as a dependency. We can do this with the command:

```sh
bundle add github-pages --group jekyll_plugins
```

You'll see that this command adds many dependencies. If you scroll up you can see the exact version of Jekyll that was added, in February 2025 the line is:

```
Fetching jekyll 3.10.0
```

### Step 3 â€” Create an Initial Skeleton Site

Before we can test everything is working we need to create a very basic Jekyll site in the `docs` folder.

First, we'll create a very basic settings file for the site by creating a a file named `docs/_config.yml` with the following contents:

```yaml
# Site Settings
title: PBS 177 Test Site
```

Finally, create a very basic home page by creating a file named `docs/index.md` with the following content:

```markdown
---
title: Home
---
# Hello World!

This is a really basic Jekyll site ðŸ™‚
```

### Step 4 â€” Test Jekyll Locally

We now have Jekyll configured and a basic site in place so we\'re ready to test it with the command:

```sh
bundle exec jekyll serve
```

This will render the contents of the `docs` as a website and write the generated files to the folder `docs/_site` and then start a locally running web server on port `4000` with that folder as the source. You'll see the URL for this local server in the output, and by default it will be `http://127.0.0.1:4000`. 

> Note that this command does not exit, but keeps running. You can kill the local server at any time with `ctrl`+`c` or closing the common prompt, but you'll only need to do that when you're finished for the day, because the Jekyll server monitors the file system for changes, and automatically re-builds your site each time you change a file in the the `docs` folder. This make debugging very easy.
>
> {: .aside}

To see the generated site, open the URL in your browser.

Notice that the site title we defined in `_config.yml` appears in the two places in the default theme:

1. In the browser window/tab title
2. In the automatically generated navigation at the top of the page as the link to always take you to the site's home page

Notice that the page title defined in the front matter in `index.md` also appears in the browser window/tab title.

The rest of the content of the home page is the rendered markdown from the body of `index.md`.

### Step 5 â€” Commit & Push the Jekyll Site

Before we commit our changes, we need to add two items to the `.gitignore` file:

1. The `docs/Gemfile.lock` file
2. The entire `docs/_site` folder

You can do that by editing the `.gitignore` file manually, by using your Git GUI app of choice, or by running the following commands:

```sh
echo 'docs/Gemfile.lock' >> ../.gitignore
echo 'docs/_site/' >> ../.gitignore
```

You can now commit all remaining new and changed files, and push your commit to GitHub.

### Step 6 â€” Enable GitHub Pages & Test

Log in to the GitHub portal, open your repository, and then navigate to the GitHub Pages settings page (**Settings** â†’ **Pages**).

Enable GitHub Pages with the following settings:

1. Leave the **Source** as **Deploy from a branch**
2. Set the **Branch** to `main` with the folder `/docs` and save

Navigate to **Actions** from the top menu bar and watch the site build.

When the build completed, click on the workflow name to see the details, this will include the published URL of your site of the.

Open the site in your browser to verify it works!

### Step 7 â€” Add Bootstrap

The version of Bootstrap we've used to date has been the compiled version, that is to say, a collection of finished CSS files. If you open those file you'll find they're massively repetitive, with very similar code repeated many times for similarly styled items. For example, the styles for all classes with `-success` in their name share the same line for setting the colour. It would be nearly impossible to actually build a CSS library as large as Bootstrap by hand. That's why it's not written by hand, it's actually written in Sass, which is a more powerful language that CSS supporting things like looping and nesting and variables to allow a simple Sass file generate a complex CSS file.

**To effectively customise Bootstrap you need to use the source Sass files as your starting point, make your additions and changes in Sass, then render your custom version of Bootstrap to CSS.**

Jekyll has native Sass support, so it has **almost** everything we need to compile the Bootstrap Sass files to CSS for us, it's just missing one important feature â€” a so-called *autoprefixer* for automatically handling browser-specific quirks through vendor prefixes when compiling Sass to CSS. Thankfully there's a Jekyll plugin available to provide this functionally, but it's not installed by default.

Before we can configure the plugin we need to install it with the following command:

```sh
bundle add jekyll-autoprefixer --group jekyll_plugins
```

As of February 2025 there's a known issue with this plugin that requires a specific version of the `execjs` gem to be used, so add that too with the command:

```sh
bundle add execjs -v 2.7
```

Then we can enable and configure the plugin in our site settings. pdate `docs/_config.yml` to the following:

```yaml
# Site Settings
title: PBS 177 Test Site

# Build Settings
plugins:
  - jekyll-autoprefixer

# Settings for the autoprefixer plugin
autoprefixer:
  browsers:
    - last 4 versions
    - Safari > 2
```

We're now ready to download the source version of Bootstrap and add it to our site.

LEFT OFF HERE!!! 

## Final Thoughts

TO DO
